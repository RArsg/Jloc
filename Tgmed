-- ===========================================
-- Brookhaven Anti-Freeze Script
-- ÙŠØ­Ù…ÙŠÙƒ Ù…Ù† Ø§Ù„ØªØ¬Ù…ÙŠØ¯ØŒ Ø§Ù„ØªØ¨Ø§Ø·Ø¤ØŒ ÙˆØªØ£Ø«ÙŠØ±Ø§Øª Ø§Ù„Ø­Ø±ÙƒØ©
-- ===========================================

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local Workspace = game:GetService("Workspace")

local Player = Players.LocalPlayer
local ANTI_FREEZE_ENABLED = true

-- Ø²Ø± Ø§Ù„ØªØ­ÙƒÙ… (F7)
UserInputService.InputBegan:Connect(function(input)
    if input.KeyCode == Enum.KeyCode.F7 then
        ANTI_FREEZE_ENABLED = not ANTI_FREEZE_ENABLED
        
        if ANTI_FREEZE_ENABLED then
            game:GetService("StarterGui"):SetCore("SendNotification", {
                Title = "â„ï¸ Anti-Freeze",
                Text = "Ù…ÙØ¹Ù„ - Ù„Ù† ÙŠØªÙ… ØªØ¬Ù…ÙŠØ¯Ùƒ",
                Duration = 3
            })
        else
            game:GetService("StarterGui"):SetCore("SendNotification", {
                Title = "â„ï¸ Anti-Freeze",
                Text = "Ù…Ø¹Ø·Ù„",
                Duration = 3
            })
        end
    end
end)

-- Ø¯Ø§Ù„Ø© ÙƒØ´Ù ÙˆØ¥Ø²Ø§Ù„Ø© Ø§Ù„ØªØ¬Ù…ÙŠØ¯
local function detectAndRemoveFreeze()
    if not ANTI_FREEZE_ENABLED then return end
    
    local character = Player.Character
    if not character then return end
    
    local humanoid = character:FindFirstChild("Humanoid")
    if not humanoid then return end
    
    -- 1. ÙƒØ´Ù Ø¥Ø°Ø§ Humanoid Ù…Ø¬Ù…Ø¯
    if humanoid.WalkSpeed == 0 or humanoid.WalkSpeed < 16 then
        humanoid.WalkSpeed = 16 -- Ø³Ø±Ø¹Ø© Ø§Ù„Ù…Ø´ÙŠ Ø§Ù„Ø¹Ø§Ø¯ÙŠØ©
        warn("âš ï¸ ØªÙ… Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ØªØ¨Ø§Ø·Ø¤ Ù…Ù† WalkSpeed")
    end
    
    if humanoid.JumpPower == 0 or humanoid.JumpPower < 50 then
        humanoid.JumpPower = 50 -- Ù‚ÙˆØ© Ø§Ù„Ù‚ÙØ² Ø§Ù„Ø¹Ø§Ø¯ÙŠØ©
        warn("âš ï¸ ØªÙ… Ø¥ØµÙ„Ø§Ø­ JumpPower")
    end
    
    -- 2. ÙƒØ´Ù ÙˆØ¥Ø²Ø§Ù„Ø© Ø§Ù„Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ù…Ø³Ø¨Ø¨Ø© Ù„Ù„ØªØ¬Ù…ÙŠØ¯
    for _, tool in pairs(character:GetChildren()) do
        if tool:IsA("Tool") then
            -- Ø¨Ø¹Ø¶ Ø§Ù„Ø£Ø¯ÙˆØ§Øª ÙÙŠ Ø¨Ø±ÙˆÙƒÙ‡Ø§ÙÙ† ØªØ³Ø¨Ø¨ ØªØ¬Ù…ÙŠØ¯
            if tool.Name:lower():find("freeze") or 
               tool.Name:lower():find("ice") or
               tool.Name:lower():find("slow") then
                tool:Destroy()
                warn("ğŸ—‘ï¸ ØªÙ… ØªØ¯Ù…ÙŠØ± Ø£Ø¯Ø§Ø© Ø§Ù„ØªØ¬Ù…ÙŠØ¯: " .. tool.Name)
            end
        end
    end
    
    -- 3. ÙƒØ´Ù ÙˆØ¥Ø²Ø§Ù„Ø© Ø§Ù„Ø¬Ø³ÙŠÙ…Ø§Øª Ø§Ù„Ù…Ø¬Ù…Ø¯Ø©
    for _, part in pairs(character:GetDescendants()) do
        if part:IsA("ParticleEmitter") then
            if part.Name:find("Ice") or part.Name:find("Freeze") then
                part:Destroy()
            end
        end
    end
    
    -- 4. ÙƒØ´Ù ÙˆØ¥Ø²Ø§Ù„Ø© Scripts ØªØ¬Ù…ÙŠØ¯
    for _, script in pairs(character:GetDescendants()) do
        if script:IsA("Script") or script:IsA("LocalScript") then
            if script.Name:lower():find("freeze") or
               script.Name:lower():find("slow") or
               script.Name:lower():find("stun") then
                script.Disabled = true
                script:Destroy()
                warn("ğŸš« ØªÙ… ØªØ¯Ù…ÙŠØ± Ø³ÙƒØ±ÙŠØ¨Øª ØªØ¬Ù…ÙŠØ¯: " .. script.Name)
            end
        end
    end
    
    -- 5. ÙƒØ´Ù ÙˆØ¥Ø²Ø§Ù„Ø© BodyVelocities Ù…Ø¬Ù…Ø¯Ø© (ØªØ³Ø¨Ø¨ ØªØ¬Ù…ÙŠØ¯)
    for _, part in pairs(character:GetDescendants()) do
        if part:IsA("BasePart") then
            for _, force in pairs(part:GetChildren()) do
                if force:IsA("BodyVelocity") then
                    -- Ø¥Ø°Ø§ Ø§Ù„Ø³Ø±Ø¹Ø© Ù‚Ø±ÙŠØ¨Ø© Ù…Ù† Ø§Ù„ØµÙØ± (ØªØ¬Ù…ÙŠØ¯)
                    if force.Velocity.Magnitude < 1 then
                        force:Destroy()
                        warn("ğŸ§Š ØªÙ… Ø¥Ø²Ø§Ù„Ø© BodyVelocity Ù…Ø¬Ù…Ø¯")
                    end
                end
            end
        end
    end
end

-- Ø¯Ø§Ù„Ø© Ù…Ù†Ø¹ Ø§Ù„ØªØ£Ø«ÙŠØ±Ø§Øª Ø§Ù„Ø¨ØµØ±ÙŠØ© Ù„Ù„ØªØ¬Ù…ÙŠØ¯
local function removeFreezeEffects()
    local character = Player.Character
    if not character then return end
    
    -- Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø¬Ù„ÙŠØ¯ÙŠØ©
    for _, part in pairs(character:GetDescendants()) do
        if part:IsA("BasePart") then
            -- Ø¥Ø°Ø§ Ø§Ù„Ù„ÙˆÙ† Ø£Ø²Ø±Ù‚ ÙØ§ØªØ­ (ØªØ¬Ù…ÙŠØ¯)
            if part.Color:lerp(Color3.fromRGB(0, 255, 255), 0.3) then
                part.Color = Color3.fromRGB(255, 255, 255) -- Ø¥Ø±Ø¬Ø§Ø¹ Ù„Ù„ÙˆÙ† Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠ
            end
            
            -- Ø¥Ø°Ø§ Ø§Ù„Ù…Ø§Ø¯Ø© Ø¬Ù„ÙŠØ¯
            if part.Material == Enum.Material.Ice or 
               part.Material == Enum.Material.Glass then
                part.Material = Enum.Material.Plastic
            end
        end
    end
end

-- Ø¯Ø§Ù„Ø© Ø­Ù…Ø§ÙŠØ© Ù…Ù† Ø§Ù„ØªØ¬Ù…ÙŠØ¯ Ø¨Ø§Ù„Ø³Ø­Ø±/Ø£Ù†ÙŠÙ…ÙŠØ´Ù†
local function antiAnimationFreeze()
    local character = Player.Character
    if not character then return end
    
    local humanoid = character:FindFirstChild("Humanoid")
    if not humanoid then return end
    
    -- Ø¥Ø°Ø§ Ø§Ù„Ø£Ù†ÙŠÙ…ÙŠØ´Ù† ÙŠØ³Ø¨Ø¨ ØªØ¬Ù…ÙŠØ¯
    if humanoid.Animator then
        for _, track in pairs(humanoid.Animator:GetPlayingAnimationTracks()) do
            if track.Name:lower():find("freeze") or
               track.Name:lower():find("stun") or
               track.Name:lower():find("idle") then
                track:Stop() -- Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø£Ù†ÙŠÙ…ÙŠØ´Ù†
                warn("ğŸ¬ ØªÙ… Ø¥ÙŠÙ‚Ø§Ù Ø£Ù†ÙŠÙ…ÙŠØ´Ù† ØªØ¬Ù…ÙŠØ¯: " .. track.Name)
            end
        end
    end
end

-- Ø¯Ø§Ù„Ø© Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ø­Ø±ÙƒØ© Ø§Ù„ÙƒØ§Ù…Ù„Ø©
local function restoreFullMovement()
    local character = Player.Character
    if not character then return end
    
    local humanoid = character:FindFirstChild("Humanoid")
    if not humanoid then return end
    
    -- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø³Ø±Ø¹Ø§Øª Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠØ© Ù„Ø¨Ø±ÙˆÙƒÙ‡Ø§ÙÙ†
    humanoid.WalkSpeed = 16      -- Ø³Ø±Ø¹Ø© Ù…Ø´ÙŠ Ø¹Ø§Ø¯ÙŠØ©
    humanoid.JumpPower = 50      -- Ù‚ÙˆØ© Ù‚ÙØ² Ø¹Ø§Ø¯ÙŠØ©
    humanoid.AutoRotate = true   -- Ø¯ÙˆØ±Ø§Ù† ØªÙ„Ù‚Ø§Ø¦ÙŠ
    humanoid.AutoJumpEnabled = true
    
    -- Ø¥Ø²Ø§Ù„Ø© Ø£ÙŠ Ù‚ÙŠÙˆØ¯ Ø­Ø±ÙƒØ©
    humanoid.PlatformStand = false
    humanoid.Sit = false
    humanoid:ChangeState(Enum.HumanoidStateType.Running)
end

-- Ø¯Ø§Ù„Ø© ÙƒØ´Ù Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† Ø§Ù„Ù…Ø¬Ù…Ø¯ÙŠÙ† Ù„Ùƒ
local function detectPlayerFreezeAttackers()
    for _, otherPlayer in pairs(Players:GetPlayers()) do
        if otherPlayer ~= Player then
            local tool = otherPlayer.Character and otherPlayer.Character:FindFirstChildWhichIsA("Tool")
            if tool then
                -- ÙƒØ´Ù Ø£Ø¯ÙˆØ§Øª Ø§Ù„ØªØ¬Ù…ÙŠØ¯ Ø§Ù„Ù…Ø´Ù‡ÙˆØ±Ø© ÙÙŠ Ø¨Ø±ÙˆÙƒÙ‡Ø§ÙÙ†
                local freezeTools = {
                    "Freeze Gun", "Ice Staff", "Frost Blade",
                    "Slow Grenade", "Stun Baton", "Paralyzer"
                }
                
                for _, freezeTool in pairs(freezeTools) do
                    if tool.Name:find(freezeTool) then
                        warn("ğŸ¯ " .. otherPlayer.Name .. " ÙŠÙ‡Ø§Ø¬Ù…Ùƒ Ø¨Ø£Ø¯Ø§Ø© ØªØ¬Ù…ÙŠØ¯: " .. tool.Name)
                        
                        -- Ø­Ù…Ø§ÙŠØ© ØªÙ„Ù‚Ø§Ø¦ÙŠØ©
                        local char = Player.Character
                        if char then
                            local root = char:FindFirstChild("HumanoidRootPart")
                            if root then
                                -- Ù‚ÙØ² Ù„Ù„Ø®Ù„Ù
                                local humanoid = char:FindFirstChild("Humanoid")
                                if humanoid then
                                    humanoid.Jump = true
                                    humanoid:Move(Vector3.new(0, 0, -10))
                                end
                            end
                        end
                    end
                end
            end
        end
    end
end

-- Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
RunService.Heartbeat:Connect(function()
    if not ANTI_FREEZE_ENABLED then return end
    
    detectAndRemoveFreeze()
    removeFreezeEffects()
    antiAnimationFreeze()
    restoreFullMovement()
    detectPlayerFreezeAttackers()
    
    -- Ø­Ù…Ø§ÙŠØ© Ø¥Ø¶Ø§ÙÙŠØ©: Ù…Ù†Ø¹ Ø£ÙŠ ØªØºÙŠÙŠØ± ÙÙŠ Ø³Ø±Ø¹ØªÙƒ
    local character = Player.Character
    if character then
        local humanoid = character:FindFirstChild("Humanoid")
        if humanoid then
            -- Ø¥Ø°Ø§ Ø­Ø§ÙˆÙ„ Ø£Ø­Ø¯ ØªØºÙŠÙŠØ± Ø³Ø±Ø¹ØªÙƒØŒ Ø§Ø±Ø¬Ø¹Ù‡Ø§ ÙÙˆØ±Ø§Ù‹
            if humanoid.WalkSpeed ~= 16 then
                humanoid.WalkSpeed = 16
            end
            
            -- Ù…Ù†Ø¹ ÙˆØ¶Ø¹ Ø§Ù„Ø¬Ù„ÙˆØ³ Ø§Ù„Ù‚Ø³Ø±ÙŠ
            if humanoid.Sit then
                humanoid.Jump = true
                wait(0.1)
                humanoid.Sit = false
                humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
            end
        end
    end
end)

-- Ø­Ù…Ø§ÙŠØ© Ø¹Ù†Ø¯ Ù…ÙˆØª Ø§Ù„Ù„Ø§Ø¹Ø¨
Player.CharacterAdded:Connect(function(character)
    wait(1) -- Ø§Ù†ØªØ¸Ø§Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø´Ø®ØµÙŠØ©
    
    if ANTI_FREEZE_ENABLED then
        restoreFullMovement()
        
        game:GetService("StarterGui"):SetCore("SendNotification", {
            Title = "ğŸ”„ Anti-Freeze",
            Text = "ØªÙ…Øª Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø­Ø±ÙƒØªÙƒ Ø¨Ø¹Ø¯ Ø§Ù„Ù…ÙˆØª",
            Duration = 3
        })
    end
end)

print("========================================")
print("â„ï¸ BROOKHAVEN ANTI-FREEZE SCRIPT LOADED")
print("========================================")
print("Ù…Ù…ÙŠØ²Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…:")
print("1. ÙŠÙ…Ù†Ø¹ ØªØ¬Ù…ÙŠØ¯ Ø´Ø®ØµÙŠØªÙƒ")
print("2. ÙŠØ²ÙŠÙ„ Ø§Ù„ØªØ¨Ø§Ø·Ø¤ ÙˆØ§Ù„Ù‚ÙŠÙˆØ¯")
print("3. ÙŠØ¯Ù…Ø± Ø£Ø¯ÙˆØ§Øª Ø§Ù„ØªØ¬Ù…ÙŠØ¯")
print("4. ÙŠØ­Ø°Ù ØªØ£Ø«ÙŠØ±Ø§Øª Ø§Ù„Ø¬Ù„ÙŠØ¯")
print("5. ÙŠØ³ØªØ¹ÙŠØ¯ Ø³Ø±Ø¹ØªÙƒ Ø§Ù„Ø£ØµÙ„ÙŠØ©")
print("6. ÙŠÙƒØ´Ù Ø§Ù„Ù…Ù‡Ø§Ø¬Ù…ÙŠÙ† Ø¨Ø£Ø¯ÙˆØ§Øª Ø§Ù„ØªØ¬Ù…ÙŠØ¯")
print("")
print("ğŸ® Ø§Ù„ØªØ­ÙƒÙ…: Ø§Ø¶ØºØ· F7 Ù„ØªØ´ØºÙŠÙ„/Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù†Ø¸Ø§Ù…")
print("========================================")

-- ØªØ´ØºÙŠÙ„ ÙÙˆØ±ÙŠ
restoreFullMovement()
game:GetService("StarterGui"):SetCore("SendNotification", {
    Title = "â„ï¸ Anti-Freeze",
    Text = "Ø¬Ø§Ù‡Ø²! Ø§Ø¶ØºØ· F7 Ù„Ù„ØªØ­ÙƒÙ…",
    Duration = 5
})
